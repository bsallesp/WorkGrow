{
  "$schema": "../../../schemas/hook-schema.json",
  "meta": {
    "technology": "React",
    "topic": "Architecture",
    "sub_topic": "Server Actions",
    "version": "19.0.0",
    "doc_url": "https://react.dev/reference/rsc/server-actions"
  },
  "taxonomy": {
    "difficulty": "Intermediate",
    "tags": ["forms", "mutations", "server-side", "rpc"],
    "prerequisites": ["Server Components", "Forms"]
  },
  "mental_model": {
    "analogy": "Remote Control",
    "explanation": "Server Actions are like a remote control for your TV. The buttons (functions) are in your hand (Client), but when you press them, the actual action happens on the TV (Server). You don't need to walk over to the TV (manually fetch/API route) to change the channel; the remote handles the signal transmission for you."
  },
  "real_world_use_cases": [
    "Submitting a form to save data to a database.",
    "Updating a user's profile picture.",
    "Deleting an item from a list.",
    "Calling server-side logic from a button click (e.g., 'Like' button)."
  ],
  "related_concepts": [
    { "concept": "useActionState", "relationship": "The hook used to manage the state of a Server Action (loading, error, success)." },
    { "concept": "useFormStatus", "relationship": "Used to show loading state during a Server Action submission." },
    { "concept": "API Routes", "relationship": "Server Actions often replace the need for dedicated API routes for simple mutations." }
  ],
  "concepts": [
    {
      "id": "server_actions_definition",
      "name": "Definition",
      "type": "concept",
      "description": "Server Actions are asynchronous functions that run on the server but can be called from Server or Client Components.",
      "details": [
        "They are defined with the `'use server'` directive.",
        "They can be passed to the `action` prop of a `<form>`.",
        "They can be called from event handlers in Client Components."
      ],
      "code_example": {
        "snippet": "// actions.js\n'use server';\n\nexport async function createTodo(formData) {\n  const title = formData.get('title');\n  await db.todos.create({ title });\n}\n\n// Component.js\nimport { createTodo } from './actions';\n\nexport default function AddTodo() {\n  return (\n    <form action={createTodo}>\n      <input name=\"title\" />\n      <button>Add</button>\n    </form>\n  );\n}",
        "explanation": "The `createTodo` function is marked with `'use server'`. When the form is submitted, React automatically makes a request to the server to execute this function."
      }
    },
    {
      "id": "server_actions_directives",
      "name": "The 'use server' Directive",
      "type": "concept",
      "description": "The directive that marks a function as a Server Action.",
      "details": [
        "Can be placed at the top of a file to mark all exports as Server Actions.",
        "Can be placed at the top of a function body (inside a Server Component) to mark just that closure as an action.",
        "Cannot be used inside a Client Component file directly (must be imported)."
      ]
    },
    {
      "id": "server_actions_security",
      "name": "Security Considerations",
      "type": "pitfall",
      "description": "Server Actions are public endpoints.",
      "details": [
        "Even though they look like local functions, they are accessible via HTTP.",
        "Always validate inputs and check authentication/authorization inside the action.",
        "Do not rely on the UI to prevent unauthorized actions."
      ]
    }
  ]
}